import re

phonebook = {}

name = input('Enter a name:')

number = input('Enter a number:')

if phonebook.get(name):
    print(f'{name} already exists. You need to delete a record and add again if you want to change it')
else:
    phonebook[name] = number
    ukrphones1 = ''.join(re.findall("\+380[\d]{9}", number))
    ukrphones2 = ''.join(re.findall("380[\d]{9}", number))
    ukrphones3 = ''.join(re.findall("0[\d]{9}", number))

    if number == ukrphones1 or ukrphones2 or ukrphones3:
        print(f"It is a Ukrainian number:{number}")
    else:
        print("It is not a Ukrainian number")




while True:
    user_input = input('Enter a command:')
    split_input = user_input.split()

    command = split_input[0]
    if command == 'stats':
        print(len(phonebook))
    elif command == 'add':
        name = input('Enter a name:')
        if not name in phonebook.keys():
            number = input('Enter a number:')
            phonebook[name] = number

            ukrphones1 = ''.join(re.findall("\+380[\d]{9}", number))
            ukrphones2 = ''.join(re.findall("380[\d]{9}", number))
            ukrphones3 = ''.join(re.findall("0[\d]{9}", number))

            if number == ukrphones1 or ukrphones2 or ukrphones3:
                print(f"It is a Ukrainian number:{number}")
            else:
                print("It is not a Ukrainian number")

            print('New contact was added')
        else:
            name in phonebook.keys()
            print("Fault. There is such name in a phonebook.")




    elif command == 'delete':
        key = input('Enter some name: ')
        if phonebook.get(key):
            del phonebook[key]
            print("Record was deleted")
        else:
            print('Such record never existed')
    elif command == 'list':
        list = (phonebook.items())
        print(list)
    elif command == 'show':
        print(phonebook)
        name = input('Enter a name:')
        if name not in phonebook.keys():
            print("Fault. There is no such name in a phonebook.")
        else:
            print(phonebook[name])

    elif command == 'end':
        break


file = input("Enter file name: ")
with open(file, "r") as f:
    content = f.read()
    print(content)

    content_new = re.sub(r'([A-Za-z0-9]+[.-_])*[A-Za-z0-9]+@[A-Za-z0-9-]+(\.[A-Z|a-z]{2,})+\S', '*@*', content)

print(content_new)

